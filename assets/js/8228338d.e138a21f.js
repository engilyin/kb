"use strict";(self.webpackChunkalex_ilin_kb=self.webpackChunkalex_ilin_kb||[]).push([[1237],{1284:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var s=r(4848),i=r(8453);const l={},t="Git sheet sheet",o={id:"Tools/git",title:"Git sheet sheet",description:"To unstage file",source:"@site/docs/Tools/git.md",sourceDirName:"Tools",slug:"/Tools/git",permalink:"/kb/Tools/git",draft:!1,unlisted:!1,editUrl:"https://github.com/engilyin/kb/docs/Tools/git.md",tags:[],version:"current",lastUpdatedAt:1770362856e3,frontMatter:{},sidebar:"defaultSidebar",previous:{title:"How to replace the git authors",permalink:"/kb/Tools/git-author-replace"},next:{title:"Gitbash",permalink:"/kb/Tools/gitbash"}},a={},c=[{value:"To unstage file",id:"to-unstage-file",level:2},{value:"Aliases",id:"aliases",level:2},{value:"Delete branch",id:"delete-branch",level:2},{value:"Restore branches",id:"restore-branches",level:2},{value:"Windows ssh login",id:"windows-ssh-login",level:2},{value:"Set git username localy",id:"set-git-username-localy",level:2},{value:"Stash",id:"stash",level:2},{value:"Clean up repo",id:"clean-up-repo",level:2},{value:"Merging",id:"merging",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"SSL issues",id:"ssl-issues",level:3},{value:"Mac <code>zsh</code> issues",id:"mac-zsh-issues",level:3},{value:"Extract out some submodule as a separate repo",id:"extract-out-some-submodule-as-a-separate-repo",level:3},{value:"Merge repos",id:"merge-repos",level:2},{value:"Using <code>duet</code>",id:"using-duet",level:2},{value:"Migrate repo to GitHub",id:"migrate-repo-to-github",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"git-sheet-sheet",children:"Git sheet sheet"})}),"\n",(0,s.jsx)(n.h2,{id:"to-unstage-file",children:"To unstage file"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git reset package-lock.json\r\ngit restore --staged package-lock.json\n"})}),"\n",(0,s.jsx)(n.h2,{id:"aliases",children:"Aliases"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git config --global alias.st status\n"})}),"\n",(0,s.jsx)(n.h2,{id:"delete-branch",children:"Delete branch"}),"\n",(0,s.jsx)(n.p,{children:"Locally:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"#You can delete a merged local branch with:\r\n\r\ngit branch -d branchname\r\n\r\n#If it's not merged, use:\r\n\r\ngit branch -D branchname\n"})}),"\n",(0,s.jsx)(n.p,{children:"Remotely:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"git push --delete origin branchname\n"})}),"\n",(0,s.jsx)(n.p,{children:"Clean up unused remote branches:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"git remote prune origin\n"})}),"\n",(0,s.jsx)(n.p,{children:"Optimize local repo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"git gc\n"})}),"\n",(0,s.jsx)(n.p,{children:"Delete unused feature/ branches"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"git branch | grep feature/ | awk '{print $1}' | xargs git branch -d\n"})}),"\n",(0,s.jsx)(n.h2,{id:"restore-branches",children:"Restore branches"}),"\n",(0,s.jsx)(n.p,{children:"restore the commit using"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"git reflog --all\r\ngit checkout -b recovered-feature e4f5g6h\n"})}),"\n",(0,s.jsx)(n.h2,{id:"windows-ssh-login",children:"Windows ssh login"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"eval `ssh-agent -s`\r\nssh-add -t1240m ~/.ssh/my_rsa\n"})}),"\n",(0,s.jsx)(n.h2,{id:"set-git-username-localy",children:"Set git username localy"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'git config user.name "My Name"\r\ngit config user.email "my@email.com"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"stash",children:"Stash"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git stash\r\ngit list\r\ngit stash pop 0\n"})}),"\n",(0,s.jsx)(n.h2,{id:"clean-up-repo",children:"Clean up repo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git clean -fdx\n"})}),"\n",(0,s.jsx)(n.p,{children:"Check integrity:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"git fsck --full\n"})}),"\n",(0,s.jsx)(n.h2,{id:"merging",children:"Merging"}),"\n",(0,s.jsx)(n.p,{children:"$ git merge develop_forward -Xrename-threshold=25 -Xignore-space-change"}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"ssl-issues",children:"SSL issues"}),"\n",(0,s.jsx)(n.p,{children:"If you have some problems with ssl like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"fatal: unable to access 'https://git.company.com/User_Name/spring-boot-realworld-example-app.git/': SSL certificate problem: unable to get local issuer certificate\n"})}),"\n",(0,s.jsx)(n.p,{children:"you can try to turn off the validation for a while"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git config http.sslVerify false\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"mac-zsh-issues",children:["Mac ",(0,s.jsx)(n.code,{children:"zsh"})," issues"]}),"\n",(0,s.jsxs)(n.p,{children:["If you see your ",(0,s.jsx)(n.code,{children:"git branche"})," in the ",(0,s.jsx)(n.code,{children:"vi"})," you may stop doing that by:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git config --global pager.branch false\n"})}),"\n",(0,s.jsx)(n.h3,{id:"extract-out-some-submodule-as-a-separate-repo",children:"Extract out some submodule as a separate repo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git clone https://my-full-repo\r\n\r\ngit remote get-url origin\r\ngit remote rm origin\r\ngit remote get-url origin\r\n\r\n\r\ngit filter-branch --subdirectory-filter <submodulepath> -- --all\r\n\r\n# Do some changes to make it build and have a final shape of the separate project\r\n\r\n# Create new repo on remote like https://github.com/me/my-new-repo.git\r\n\r\ngit remote add origin https://github.com/me/my-new-repo.git\r\ngit remote get-url origin\r\n\r\n\r\n# BE EXTEMALLY CAREFULL WITH THIS COMMAND:\r\n\r\ngit push --mirror origin\r\n\n"})}),"\n",(0,s.jsx)(n.h2,{id:"merge-repos",children:"Merge repos"}),"\n",(0,s.jsxs)(n.p,{children:["You can use ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(4264).A+"",children:"script"})," to merge multiple repos into single one."]}),"\n",(0,s.jsxs)(n.h2,{id:"using-duet",children:["Using ",(0,s.jsx)(n.code,{children:"duet"})]}),"\n",(0,s.jsxs)(n.p,{children:["You can use ",(0,s.jsx)(n.code,{children:"duet"})," for pair programming or simply use it to avoid setting some author name and email for every repo.\r\nInstead you can have common ",(0,s.jsx)(n.code,{children:".git-authors"})," file in your home directory. Or you can drop this file into the root of\r\nyour project to have per project list of authors."]}),"\n",(0,s.jsxs)(n.p,{children:["Here is the sample ",(0,s.jsx)(n.code,{children:".git-authors"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"authors:\r\n  engilyin: Alex Ilin; engilyin\r\n  oi: Oleksandr Ilin; oleksandr_ilin\r\nemail:\r\n  domain: engilyin.com\r\nemail_addresses:\r\n  engilyin: engilyin@gmail.com\n"})}),"\n",(0,s.jsx)(n.h2,{id:"migrate-repo-to-github",children:"Migrate repo to GitHub"}),"\n",(0,s.jsx)(n.p,{children:"1\ufe0f\u20e3 Clone the source repo (everything included)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git clone --mirror https://github.com/OLD_OWNER/OLD_REPO.git\r\ncd OLD_REPO.git\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"--mirror = full history, all branches, all tags, refs, everything."})}),"\n",(0,s.jsx)(n.p,{children:"2\ufe0f\u20e3 Create a new empty repo on GitHub"}),"\n",(0,s.jsx)(n.p,{children:"Same or different account/org"}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Do NOT initialize it (no README, no .gitignore)"})}),"\n",(0,s.jsx)(n.p,{children:"3\ufe0f\u20e3 Push everything to the new repo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git push --mirror https://github.com/NEW_OWNER/NEW_REPO.git\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u2705 Done. Repo is fully migrated."})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},4264:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/files/merge-repos-3192d3349309ed31aee52d39f47c4386.sh"},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>o});var s=r(6540);const i={},l=s.createContext(i);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);