<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Job/TechInterview/Java/design/effective-java" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">effective-java | Alex Ilin Knowledge Base</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://engilyin.github.com/kb/Job/TechInterview/Java/design/effective-java"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="effective-java | Alex Ilin Knowledge Base"><meta data-rh="true" name="description" content="Effective Java"><meta data-rh="true" property="og:description" content="Effective Java"><link data-rh="true" rel="icon" href="/kb/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://engilyin.github.com/kb/Job/TechInterview/Java/design/effective-java"><link data-rh="true" rel="alternate" href="https://engilyin.github.com/kb/Job/TechInterview/Java/design/effective-java" hreflang="en"><link data-rh="true" rel="alternate" href="https://engilyin.github.com/kb/Job/TechInterview/Java/design/effective-java" hreflang="x-default"><link rel="stylesheet" href="/kb/assets/css/styles.41438659.css">
<script src="/kb/assets/js/runtime~main.01e127b3.js" defer="defer"></script>
<script src="/kb/assets/js/main.c0ac9e7d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kb/"><div class="navbar__logo"><img src="/kb/img/logo.jpg" alt="Alex Ilin KB Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/kb/img/logo.jpg" alt="Alex Ilin KB Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Alex Ilin Knowledge Base</b></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div><a href="https://github.com/engilyin/kb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kb/">Alex Ilin Knowledge Base</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/kb/Cloud/AWS/">Cloud</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kb/category/databases">Databases</a><button aria-label="Expand sidebar category &#x27;Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kb/category/devops">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kb/category/development">Development</a><button aria-label="Expand sidebar category &#x27;Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/kb/category/job">Job</a><button aria-label="Collapse sidebar category &#x27;Job&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/kb/category/interview">Interview</a><button aria-label="Collapse sidebar category &#x27;Interview&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/kb/Job/TechInterview/Java/">Java Tech Interview</a><button aria-label="Collapse sidebar category &#x27;Java Tech Interview&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/kb/Job/TechInterview/Java/core/collections">core</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/kb/Job/TechInterview/Java/design/approach">design</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/kb/Job/TechInterview/Java/design/approach">approach</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/kb/Job/TechInterview/Java/design/design-patterns">design-patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kb/Job/TechInterview/Java/design/effective-java">effective-java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/kb/Job/TechInterview/Java/design/solid">solid</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/kb/Job/TechInterview/Java/design/testing">testing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/kb/Job/TechInterview/Java/opinion/myanswers">opinion</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/kb/Job/TechInterview/Java/problem-solving/common-coding-problems">problem-solving</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/kb/Job/TechInterview/Java/related/sql">related</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/kb/Job/TechInterview/Java/spring/aop">spring</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kb/Job/TechInterview/db-tech-interview">Tech Interview DB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kb/Job/TechInterview/devops-tech-interview">Tech Interview DevOps</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/kb/Network/networking">Network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kb/category/sre">SRE</a><button aria-label="Expand sidebar category &#x27;SRE&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kb/category/software-architecture">Software Architecture</a><button aria-label="Expand sidebar category &#x27;Software Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kb/category/tools">Tools</a><button aria-label="Expand sidebar category &#x27;Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/kb/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/kb/category/job"><span itemprop="name">Job</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/kb/category/interview"><span itemprop="name">Interview</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/kb/Job/TechInterview/Java/"><span itemprop="name">Java Tech Interview</span></a><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">design</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">effective-java</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>effective-java</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="effective-java">Effective Java<a href="#effective-java" class="hash-link" aria-label="Direct link to Effective Java" title="Direct link to Effective Java">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h4>
<ul>
<li><a href="https://www.amazon.com/Effective-Java-2nd-Joshua-Bloch/dp/0321356683" target="_blank" rel="noopener noreferrer">Effective Java by Joshua Bloch</a> -- Highly recommended</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="table-of-contents">Table of Contents<a href="#table-of-contents" class="hash-link" aria-label="Direct link to Table of Contents" title="Direct link to Table of Contents">​</a></h3>
<ul>
<li><a href="#effective-java">Effective Java</a>
<ul>
<li><a href="#resources">Resources</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#creating-and-destroying-objects">Creating and Destroying Objects</a>
<ul>
<li><a href="#consider-static-builders">Consider static builders</a></li>
<li><a href="#service-interface-pattern">Service Interface Pattern</a></li>
<li><a href="#builder-pattern">Builder pattern</a></li>
<li><a href="#singleton-with-private-instance-or-enum">Singleton with private instance or enum</a></li>
<li><a href="#private-constructor">Private Constructor</a></li>
<li><a href="#avoid-creating-unnecessary-objects">Avoid creating unnecessary objects</a></li>
<li><a href="#clear-memory-references">Clear memory references</a></li>
<li><a href="#avoid-finalizers">Avoid finalizers</a></li>
</ul>
</li>
<li><a href="#methods-common-to-all-objects">Methods common to all objects</a>
<ul>
<li><a href="#equals">equals</a></li>
<li><a href="#hashcode">hashcode</a></li>
<li><a href="#tostring">toString</a></li>
<li><a href="#clone">clone</a></li>
<li><a href="#comparable">comparable</a></li>
</ul>
</li>
<li><a href="#classes-and-interfaces">Classes and Interfaces</a>
<ul>
<li><a href="#accessibility">Accessibility</a></li>
<li><a href="#private-fields-with-accessor-methods">Private fields with accessor methods</a></li>
<li><a href="#make-fields-as-much-immutable-as-possible">Make fields as much immutable as possible</a></li>
<li><a href="#composition-over-inheritance">Composition over inheritance</a></li>
<li><a href="#override-in-inheritance">Override in inheritance</a></li>
<li><a href="#prefer-interfaces-to-abstract-classes">Prefer interfaces to abstract classes</a></li>
<li><a href="#class-hierarchies-over-tagged-classes">Class hierarchies over tagged classes</a></li>
<li><a href="#function-objects-to-represent-strategies">Function objects to represent strategies</a></li>
<li><a href="#favor-static-member-class-over-non-static">Favor static member class over non-static</a></li>
</ul>
</li>
<li><a href="#generics">Generics</a>
<ul>
<li><a href="#dont-use-raw-types">Don&#x27;t use Raw types</a></li>
<li><a href="#prefer-lists-to-arrays">Prefer Lists to arrays</a></li>
</ul>
</li>
<li><a href="#enums-and-annotations">Enums and Annotations</a>
<ul>
<li><a href="#enums-instead-of-int-constants">Enums instead of int constants</a></li>
<li><a href="#prefer-annotations-over-naming-patterns">Prefer annotations over naming patterns</a></li>
</ul>
</li>
<li><a href="#methods">Methods</a>
<ul>
<li><a href="#definition">Definition</a></li>
<li><a href="#var-args">Var args</a></li>
<li><a href="#return-empty-collections-instead-of-null">Return empty collections instead of null</a></li>
</ul>
</li>
<li><a href="#general">General</a>
<ul>
<li><a href="#use-serializable-judiciously">Use Serializable Judiciously</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-and-destroying-objects">Creating and Destroying Objects<a href="#creating-and-destroying-objects" class="hash-link" aria-label="Direct link to Creating and Destroying Objects" title="Direct link to Creating and Destroying Objects">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="consider-static-builders">Consider static builders<a href="#consider-static-builders" class="hash-link" aria-label="Direct link to Consider static builders" title="Direct link to Consider static builders">​</a></h4>
<ul>
<li>They can have any name, thus can have multiple methods with same parameters (unlike constructors)</li>
<li>They can return cached objects (eg: Boolean.valueOf)</li>
<li>They can return their subtype, even class objects which are not public. Eg: Collection has 32 factory methods, return type of many are non-public classes. Ofcourse, the interface they extend is public. Returning such interface backed classes, also help in returning specific type based on argument. Eg: EnumSet returns RegularEnumSet or JumboEnumSet based on the argument. In future, JDK can add more types, without client/caller knowing about them. See service interface pattern below</li>
<li>They can reduce verbosity of parameterized types. Eg: Maps.newHashMap()</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-interface-pattern">Service Interface Pattern<a href="#service-interface-pattern" class="hash-link" aria-label="Direct link to Service Interface Pattern" title="Direct link to Service Interface Pattern">​</a></h4>
<ul>
<li>Here same pattern as above, where the implementation classes are not even known upfront.</li>
<li>Example: JDBC connection driver classes. DriverManager.registerDriver, and DriverManager.getConnection.</li>
<li>It needs to provide, registration API and then get service API</li>
<li>Cannot subclass and take advantage of constructors. Though this enforces Composition instead of inheritance, so its not so bad.</li>
<li>Cannot easily distinguish between constructing methods, and other methods. Need to use some convention to make it easy. Eg: newInstance, valueOf, of etc.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="builder-pattern">Builder pattern<a href="#builder-pattern" class="hash-link" aria-label="Direct link to Builder pattern" title="Direct link to Builder pattern">​</a></h4>
<ul>
<li>When too many parameters use builders instead.</li>
<li>In Builders, each parameter setting can be through a good name method. In constructor its difficult to remember.</li>
<li>Can easily add optional parameter support.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="singleton-with-private-instance-or-enum">Singleton with private instance or enum<a href="#singleton-with-private-instance-or-enum" class="hash-link" aria-label="Direct link to Singleton with private instance or enum" title="Direct link to Singleton with private instance or enum">​</a></h4>
<ul>
<li>static final variable (also provides init guarantee)</li>
<li>Lazy loading (double checked)</li>
<li>Enums (by default lazy, and provides init guarantee)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="private-constructor">Private Constructor<a href="#private-constructor" class="hash-link" aria-label="Direct link to Private Constructor" title="Direct link to Private Constructor">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="avoid-creating-unnecessary-objects">Avoid creating unnecessary objects<a href="#avoid-creating-unnecessary-objects" class="hash-link" aria-label="Direct link to Avoid creating unnecessary objects" title="Direct link to Avoid creating unnecessary objects">​</a></h4>
<ul>
<li>Eg: Sring abc = new String(&quot;some value&quot;); instead use String abc = &quot;some value&quot;;</li>
<li>Choose primitives over boxed, check for unnecessary boxing and unboxing</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="clear-memory-references">Clear memory references<a href="#clear-memory-references" class="hash-link" aria-label="Direct link to Clear memory references" title="Direct link to Clear memory references">​</a></h4>
<ul>
<li>Let objects go out of scope quickly</li>
<li>If not, nullify reference (eg: Stack.pop, within method, elements[size] = null)</li>
<li>Check caches and message listeners, they hold references</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="avoid-finalizers">Avoid finalizers<a href="#avoid-finalizers" class="hash-link" aria-label="Direct link to Avoid finalizers" title="Direct link to Avoid finalizers">​</a></h4>
<ul>
<li>JVM does not guarantee they will be called</li>
<li>If called, they can be called anytime, not immediately after object is eligible for GC</li>
<li>Never release resource in finalizer, if it does not run, the resource will still be lock (or in inconsistent state)</li>
<li>Hampers performance</li>
<li>Instead use explicit close methods like OutputStream, java.sql.Connection etc</li>
<li>These classes also use finalizers, but that is safety net</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods-common-to-all-objects">Methods common to all objects<a href="#methods-common-to-all-objects" class="hash-link" aria-label="Direct link to Methods common to all objects" title="Direct link to Methods common to all objects">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="equals">equals<a href="#equals" class="hash-link" aria-label="Direct link to equals" title="Direct link to equals">​</a></h4>
<ul>
<li>If super class has implemented equals, then its okay to not implement (eg: Set used AbstractSet)</li>
<li>Reflexive (equal to self), transitive, symmetric, consistent (unless modified)</li>
<li>Maintain Liskov Substitution Principle, within equals (don&#x27;t check o.getClass() == this.getClass() instead check with instanceof</li>
<li>Consistent - Don&#x27;t use external resources (eg: IP address)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hashcode">hashcode<a href="#hashcode" class="hash-link" aria-label="Direct link to hashcode" title="Direct link to hashcode">​</a></h4>
<ul>
<li>every class which overrides equals must have it</li>
<li>Consistent across multiple calls</li>
<li>Dont use any fields, which are not used for equals</li>
<li>You can exclude redundant fields (ones which are always same for all objects)</li>
<li>You can cache the hashcode and return that (like String class), but then need to track if value is modified.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tostring">toString<a href="#tostring" class="hash-link" aria-label="Direct link to toString" title="Direct link to toString">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="clone">clone<a href="#clone" class="hash-link" aria-label="Direct link to clone" title="Direct link to clone">​</a></h4>
<ul>
<li>Cloneable interface. Its a mixin interface. Does not have clone method.</li>
<li>Object class&#x27;s clone method is protected</li>
<li>Atypical - Presence of Colenable modifies behavior of Object.clone() behavior. If present it returns object which is field by field copy, and if not present, then .clone method throws CloneNotSupportedException</li>
<li>Cloning is not done using constructor</li>
<li>If you override clone do return super.clone(), if all classes do that up the chain, then Object.clone will be called and you will get the right copy</li>
<li>This is important because spec doesnt enforce anything from Cloneable interface. So someone might override clone and not clone, nor call super.clone, causing problems</li>
<li>Note: Objects.clone() creates a shallow copy</li>
<li>If you override and write clone, ofcourse you cannot set final field, thus need to remove final modifiers</li>
<li>Object&#x27;s clone method is declared to throw CloneNotSupportedException, but overriding clone methods can omit this declaration.</li>
<li>Like constructor, clone method should not call non-final methods, because super object might not be properly constructed yet, causing some data corruption</li>
<li>Clone method must be synchronized in case of concurrency</li>
<li>In short, you are better off, creating and using a copy-constructor</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="comparable">comparable<a href="#comparable" class="hash-link" aria-label="Direct link to comparable" title="Direct link to comparable">​</a></h4>
<ul>
<li>Opposing sign for symmetry x.compareTo(y) == -y.compareTo(x)</li>
<li>If compareTo returns 0, objects should ideally be equal (but thats not in contract)</li>
<li>Weird: Inserting new BigDecimal(&quot;1.0&quot;) and new BigDecimal(&quot;1.00&quot;) in HashSet stores 2 elements (they use equals), while TreeSet stores only 1 element (they use compareTo)</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="classes-and-interfaces">Classes and Interfaces<a href="#classes-and-interfaces" class="hash-link" aria-label="Direct link to Classes and Interfaces" title="Direct link to Classes and Interfaces">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessibility">Accessibility<a href="#accessibility" class="hash-link" aria-label="Direct link to Accessibility" title="Direct link to Accessibility">​</a></h4>
<ul>
<li>Make fields, classes etc as much inaccessible as possible (private, protected, package, then public)</li>
<li>Anything that is public is now part of API, thus difficult to make private later</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="private-fields-with-accessor-methods">Private fields with accessor methods<a href="#private-fields-with-accessor-methods" class="hash-link" aria-label="Direct link to Private fields with accessor methods" title="Direct link to Private fields with accessor methods">​</a></h4>
<ul>
<li>Helps in validating inputs (setters)</li>
<li>Helps in returning copies in outputs (getters)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="make-fields-as-much-immutable-as-possible">Make fields as much immutable as possible<a href="#make-fields-as-much-immutable-as-possible" class="hash-link" aria-label="Direct link to Make fields as much immutable as possible" title="Direct link to Make fields as much immutable as possible">​</a></h4>
<ul>
<li>Immutable objects are simple</li>
<li>They are thread-safe</li>
<li>They can be shared freely</li>
<li>They can expose their internals</li>
<li>Can take advantage of cached hashCode &amp; lazyInit hashCode</li>
<li>Only disadvantage is memory use</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="composition-over-inheritance">Composition over inheritance<a href="#composition-over-inheritance" class="hash-link" aria-label="Direct link to Composition over inheritance" title="Direct link to Composition over inheritance">​</a></h4>
<ul>
<li>Inheritance violates encapsulation, if super class changes sub-class behavior changes even if its not touched</li>
<li>Super class can later add method, sub-class havent thought of</li>
<li>In fact, it can add method which mutates the state which sub-class never promised to do.</li>
<li>If you add your own methods in sub-class, and later super-class adds same name method its a problem. Either it may not compile based on return type, or contract of that method in super might be different than subclass method.</li>
<li>Instead use composition and forward/delegate the calls</li>
<li>Such classes are called Wrapper classes (decoration pattern)</li>
<li>Only problem is library/frameworks do not know of your class type, and can&#x27;t trigger message callbacks and such.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="override-in-inheritance">Override in inheritance<a href="#override-in-inheritance" class="hash-link" aria-label="Direct link to Override in inheritance" title="Direct link to Override in inheritance">​</a></h4>
<ul>
<li>Constructor must not call method (which is overridden), because super() constructor will call override() of subclass, which is not yet constructed</li>
<li>Same problems can occur with clone and readObject (so avoid inheritance with Cloneable and Serializable)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prefer-interfaces-to-abstract-classes">Prefer interfaces to abstract classes<a href="#prefer-interfaces-to-abstract-classes" class="hash-link" aria-label="Direct link to Prefer interfaces to abstract classes" title="Direct link to Prefer interfaces to abstract classes">​</a></h4>
<ul>
<li>Classes can be retrofitted to have more interfaces</li>
<li>Interfaces allow mix-in types (markup), without need to implement any methods</li>
<li>Interfaces allow cross-types (eg: SingerWriter implements Singer, Writer)</li>
<li>Interfaces are not allowed methods, but Skeleton types can be created. Eg: AbstractSet, AbstractList etc. These classes help create concrete implementations by providing part of functionality</li>
<li>If class cannot extend Skeletal (Abstract) class, we can implement the Interface, and have Skeletal class instance as composition field, and delegate all interface methods, to skeletal class instance. This is called, simulated multiple inheritance.</li>
<li>Disadvantage: Once release, interfaces are impossible to change (all implementations need to be updated)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="class-hierarchies-over-tagged-classes">Class hierarchies over tagged classes<a href="#class-hierarchies-over-tagged-classes" class="hash-link" aria-label="Direct link to Class hierarchies over tagged classes" title="Direct link to Class hierarchies over tagged classes">​</a></h4>
<ul>
<li>Lot of boilerplate in tagged classes: Enums, fields, switch statements</li>
<li>Memory issue: Tagged classes can contains fields specific for one type, but object of all types will have those extra fields.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-objects-to-represent-strategies">Function objects to represent strategies<a href="#function-objects-to-represent-strategies" class="hash-link" aria-label="Direct link to Function objects to represent strategies" title="Direct link to Function objects to represent strategies">​</a></h4>
<ul>
<li>Use classes (stateless) to represent computation. This can be passed around. Ex: StringLengthComparator</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="favor-static-member-class-over-non-static">Favor static member class over non-static<a href="#favor-static-member-class-over-non-static" class="hash-link" aria-label="Direct link to Favor static member class over non-static" title="Direct link to Favor static member class over non-static">​</a></h4>
<ul>
<li>Every non-static class object has instance of enclosing class. Takes more memory.</li>
<li>Non-static class instances cannot be created without creating instances of enclosing class</li>
<li>Though one valid use of non-static class is, implementing Iterator for the class</li>
<li>Static classes are typically used to create Helper classes</li>
<li>Defining them public or private depends on whether you want to expose it in API</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generics">Generics<a href="#generics" class="hash-link" aria-label="Direct link to Generics" title="Direct link to Generics">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dont-use-raw-types">Don&#x27;t use Raw types<a href="#dont-use-raw-types" class="hash-link" aria-label="Direct link to Don&#x27;t use Raw types" title="Direct link to Don&#x27;t use Raw types">​</a></h4>
<ul>
<li>Using types in all reference variables, helps in safety and avoiding boilerplate of casting</li>
<li>Use generic fields (<code>public E element</code>) in class</li>
<li>Use generic methods (<code>public static &lt;E&gt; Set&lt;E&gt; union(Set&lt;E&gt; s1, Set&lt;E&gt; s2)</code>).. <code>&lt;E&gt;</code> helps in type inference</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prefer-lists-to-arrays">Prefer Lists to arrays<a href="#prefer-lists-to-arrays" class="hash-link" aria-label="Direct link to Prefer Lists to arrays" title="Direct link to Prefer Lists to arrays">​</a></h4>
<ul>
<li>Arrays are covariant (Object[] a = new Long[]), but it fails at runtime (a[0] = &quot;string value&quot;);</li>
<li>Arrays retain types at runtime (reified) thus they throw ArrayStoreExceptions. Lists (generics) do type erasure at compile time.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enums-and-annotations">Enums and Annotations<a href="#enums-and-annotations" class="hash-link" aria-label="Direct link to Enums and Annotations" title="Direct link to Enums and Annotations">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enums-instead-of-int-constants">Enums instead of int constants<a href="#enums-instead-of-int-constants" class="hash-link" aria-label="Direct link to Enums instead of int constants" title="Direct link to Enums instead of int constants">​</a></h4>
<ul>
<li>Enums provide name space. If you use int constants for 2 different Type hierarchies (AppleTypes &amp; OrangeTypes), you can pass value of one to method of another, accidently, and compiler wont complain</li>
<li>Enums are iterable. Cannot iterate over int constants</li>
<li>Enums have default toString. Cannot sysout int constants (they will print numbers which are not helpful)</li>
<li>You can extend functionality of enums</li>
<li>Enums can be based on multiple fields</li>
<li>EnumSet instead of Bit set (way to define union of types eg: STYLE_BOLD | STYLE_ITALIC), instead just use EnumSet.of(STYLE_BOLD, STYLE_ITALIC).</li>
<li>EnumMap</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prefer-annotations-over-naming-patterns">Prefer annotations over naming patterns<a href="#prefer-annotations-over-naming-patterns" class="hash-link" aria-label="Direct link to Prefer annotations over naming patterns" title="Direct link to Prefer annotations over naming patterns">​</a></h4>
<ul>
<li>Eg: @Test instead of all method names starting with test</li>
<li>Annotations have retention policy. Eg: RetentionPolicy.RUNTIME</li>
<li>Annotations have target. Eg: @Target(ElementType.METHOD)</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods">Methods<a href="#methods" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="definition">Definition<a href="#definition" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition">​</a></h4>
<ul>
<li>Choose method names carefully - they are part of API</li>
<li>Choose parameter types as interfaces instead of implementations</li>
<li>Long list of methods with identically typed parameters is wrong</li>
<li>Dont have too many parameters</li>
<li>Prefer Enum over boolean</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="var-args">Var args<a href="#var-args" class="hash-link" aria-label="Direct link to Var args" title="Direct link to Var args">​</a></h4>
<ul>
<li>If method needs to take 1 or more, then have 1st param, then 2nd as var..args</li>
<li>Arrays.asList() was a mistake, because you can pass multiple values to it, but if you pass array to it, then it considers that as var..args with single element of type array.</li>
<li>Instead it should have had Arrays.gather(T... args) and then return Arrays.asList(args)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="return-empty-collections-instead-of-null">Return empty collections instead of null<a href="#return-empty-collections-instead-of-null" class="hash-link" aria-label="Direct link to Return empty collections instead of null" title="Direct link to Return empty collections instead of null">​</a></h4>
<ul>
<li>These return values are iterable</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="general">General<a href="#general" class="hash-link" aria-label="Direct link to General" title="Direct link to General">​</a></h3>
<ul>
<li>Avoid float and double for exact answers use BigDecimal</li>
<li>Avoid boxed, (== does not work), and constant boxing-unboxing consumes CPU</li>
<li>Use StringBuilder instead of direct concatenation</li>
<li>Refer to objects by their interfaces</li>
<li>Use checked exceptions for recoverable conditions, and runtime exceptions for programming errors</li>
<li>Favor standard exception like IllegalStateException, IllegalArgumentException etc</li>
<li>Prefer Executors and Tasks to threads</li>
<li>Prefer concurrency classes instead of wait notify</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-serializable-judiciously">Use Serializable Judiciously<a href="#use-serializable-judiciously" class="hash-link" aria-label="Direct link to Use Serializable Judiciously" title="Direct link to Use Serializable Judiciously">​</a></h4>
<ul>
<li>Like APIs once serialized, then cant change class structure</li>
<li>Increases testing burden (backwards compatible)</li>
<li>Increases security loopholes, because it does not use default constructor</li>
<li>Inheritance based classes should avoid serializable</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/engilyin/kb/docs/Job/TechInterview/Java/design/effective-java.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-10-03T16:28:54.000Z" itemprop="dateModified">Oct 3, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/kb/Job/TechInterview/Java/design/design-patterns"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">design-patterns</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/kb/Job/TechInterview/Java/design/solid"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">solid</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#effective-java" class="table-of-contents__link toc-highlight">Effective Java</a><ul><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of Contents</a></li><li><a href="#creating-and-destroying-objects" class="table-of-contents__link toc-highlight">Creating and Destroying Objects</a></li><li><a href="#methods-common-to-all-objects" class="table-of-contents__link toc-highlight">Methods common to all objects</a></li><li><a href="#classes-and-interfaces" class="table-of-contents__link toc-highlight">Classes and Interfaces</a></li><li><a href="#generics" class="table-of-contents__link toc-highlight">Generics</a></li><li><a href="#enums-and-annotations" class="table-of-contents__link toc-highlight">Enums and Annotations</a></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a></li><li><a href="#general" class="table-of-contents__link toc-highlight">General</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Alex Ilin. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>